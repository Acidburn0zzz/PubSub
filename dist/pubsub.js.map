{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 122d09aa9247d10992d2","webpack:///./src/pubsub.js","webpack:///./src/alias.js"],"names":["PubSub","topics","subUid","topic","callback","once","token","obj","TypeError","push","subscribe","data","that","setTimeout","subscribers","len","length","currentSubscriber","name","unsubscribe","tf","prop","Object","hasOwnProperty","call","splice","prototype","on","trigger","off","alias","fn","closure","apply","arguments"],"mappings":"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","file":"pubsub.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"PubSub\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PubSub\"] = factory();\n\telse\n\t\troot[\"PubSub\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 122d09aa9247d10992d2","import alias from './alias';\n\nclass PubSub {\n  constructor() {\n    this.topics = {}; // Storage for topics that can be broadcast or listened to.\n    this.subUid = -1; // A topic identifier.\n  }\n\n  /**\n   * Subscribe to events of interest with a specific topic name and a\n   * callback function, to be executed when the topic/event is observed.\n   *\n   * @this {PubSub}\n   * @param {String} topic The topic name.\n   * @param {Function} callback Callback function to execute on event, taking two arguments:\n   *        - {*} data The data passed when publishing an event\n   *        - {Object} The topic's info (name & token)\n   * @param {Boolean} [once=false] Checks if event will be triggered only one time.\n   * @return {Number} The topic's token.\n   * @example\n   *\n   * var pubsub = new PubSub();\n   *\n   * var onUserAdd = pubsub.subscribe('user_add', function (data, topic) {\n   *   console.log('User added');\n   *   console.log('user data:', data);\n   * });\n   */\n  subscribe(topic, callback, once) {\n    const token = this.subUid += 1;\n    const obj = {};\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('When subscribing for an event, a callback function must be defined.');\n    }\n\n    if (!this.topics[topic]) {\n      this.topics[topic] = [];\n    }\n\n    obj.token = token;\n    obj.callback = callback;\n    obj.once = !!once;\n\n    this.topics[topic].push(obj);\n\n    return token;\n  }\n\n  /**\n   * Subscribe to events of interest setting a flag\n   * indicating the event will be published only one time.\n   *\n   * @this {PubSub}\n   * @param {String} topic The topic's name.\n   * @param {Function} callback Callback function to execute on event, taking two arguments:\n   *        - {*} data The data passed when publishing an event\n   *        - {Object} The topic's info (name & token)\n   * @return {Number} The topic's token.\n   * @example\n   *\n   * var onUserAdd = pubsub.subscribeOnce('user_add', function (data, topic) {\n   *   console.log('User added');\n   *   console.log('user data:', data);\n   * });\n   */\n  subscribeOnce(topic, callback) {\n    return this.subscribe(topic, callback, true);\n  }\n\n  /**\n   * Publish or broadcast events of interest with a specific\n   * topic name and arguments such as the data to pass along.\n   *\n   * @this {PubSub}\n   * @param {String} topic The topic's name.\n   * @param {*} [data] The data to be passed.\n   * @return {Boolean} `true` if topic exists and event is published, else `false`.\n   * @example\n   *\n   * pubsub.publish('user_add', {\n   *   firstName: 'John',\n   *   lastName: 'Doe',\n   *   email: 'johndoe@gmail.com'\n   * });\n   */\n  publish(topic, data) {\n    const that = this;\n\n    if (!this.topics[topic]) {\n      return false;\n    }\n\n    setTimeout(function () {\n      const subscribers = that.topics[topic];\n      let len = subscribers ? subscribers.length : 0;\n\n      while (len) {\n        len -= 1;\n\n        const token = subscribers[len].token;\n        const currentSubscriber = subscribers[len];\n\n        currentSubscriber.callback(data, {\n          name: topic,\n          token: token\n        });\n\n        // Unsubscribe from event based on tokenized reference,\n        // if subscriber's property once is set to true.\n        if (currentSubscriber.once === true) {\n          that.unsubscribe(token);\n        }\n      }\n    }, 0);\n\n    return true;\n  }\n\n  /**\n   * Unsubscribe from a specific topic, based on the topic name,\n   * or based on a tokenized reference to the subscription.\n   *\n   * @this {PubSub}\n   * @param {String|Object} topic Topic's name or subscription referenece.\n   * @return {Boolean|String} `false` if `topic` does not match a subscribed event, else the topic's name.\n   *\n   * PubSub.unsubscribe('user_add');\n   * or\n   * pubsub.unsubscribe(onUserAdd);\n   */\n  unsubscribe(topic) {\n    let tf = false;\n\n    for (let prop in this.topics) {\n      if (Object.hasOwnProperty.call(this.topics, prop)) {\n        if (this.topics[prop]) {\n          let len = this.topics[prop].length;\n\n          while (len) {\n            len -= 1;\n\n            // `topic` is a tokenized reference to the subscription.\n            if (this.topics[prop][len].token === topic) {\n              this.topics[prop].splice(len, 1);\n              return topic;\n            }\n\n            // `topic` is the event name.\n            if (prop === topic) {\n              this.topics[prop].splice(len, 1);\n              tf = true;\n            }\n          }\n\n          if (tf === true) {\n            return topic;\n          }\n        }\n      }\n    }\n\n    return false;\n  }\n}\n\n// Alias for public methods.\nPubSub.prototype.on = alias('subscribe');\nPubSub.prototype.once = alias('subscribeOnce');\nPubSub.prototype.trigger = alias('publish');\nPubSub.prototype.off = alias('unsubscribe');\n\nexport default PubSub;\n\n\n\n// WEBPACK FOOTER //\n// ./src/pubsub.js","/**\n * Alias a method while keeping the context correct,\n * to allow for overwriting of target method.\n *\n * @private\n * @this {PubSub}\n * @param {String} fn The name of the target method.\n * @return {Function} The aliased method.\n */\nfunction alias(fn) {\n  return function closure() {\n    return this[fn].apply(this, arguments);\n  };\n}\n\nexport default alias;\n\n\n\n// WEBPACK FOOTER //\n// ./src/alias.js"],"sourceRoot":""}