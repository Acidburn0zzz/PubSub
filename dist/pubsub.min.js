/**
 * PubSub 2014-09-26 - v1.0.0
 * Javascript implementation of the Publish/Subscribe pattern.
 * https://github.com/georapbox/PubSub
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
!function(a,b,c){"use strict";"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("PubSub",this,function(){"use strict";function a(a){return function(){return this[a].apply(this,arguments)}}var b=function(){this.topics={},this.subUid=-1},c=b.prototype;return c.subscribe=function(a,b){var c=this.subUid+=1;return this.topics[a]||(this.topics[a]=[]),this.topics[a].push({token:c,eventType:a,callback:b}),this},c.publish=function(a,b,c){var d,e,f=this;return this.topics[a]?(setTimeout(function(){for(d=f.topics[a],e=d?d.length:0,"function"==typeof b&&(b={});e;)e-=1,d[e].callback(a,b);"undefined"!=typeof c&&"function"==typeof c&&c()},0),!0):!1},c.unsubscribe=function(a){var b,c,d;for(b in this.topics)if(this.topics[b])for(c=0,d=this.topics[b].length;d>c;c+=1)if(this.topics[b][c].eventType===a)return this.topics[b].splice(c,1),a;return!1},c.on=a("subscribe"),c.trigger=a("publish"),c.off=a("unsubscribe"),b});